<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            padding-bottom: 60px;
        }
        .navbar-brand {
          font-weight: bold;
          color: #0d6efd;
        }
        
        .navbar-nav .nav-link.active {
          font-weight: bold;
          color: #198754;
        }
        .header {
            background-color: #007bff;
            color: white;
            padding: 15px 0;
        }
        h1 {
            color: #343a40;
            font-family: 'Arial', sans-serif;
            margin-bottom: 30px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .btn {
            transition: background-color 0.3s ease;
        }
        .btn:hover {
            opacity: 0.85;
        }
        .hidden {
            display: none;
        }
    </style>
    <title>Cadastro de Movimentação</title>
</head>
<body>
  {% if messages %}
    <script>
        window.onload = function() {
            {% for message in messages %}
                alert("{{ message }}"); 
            {% endfor %}
        }
    </script>
{% endif %}

  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">CDG Estoque</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" 
              data-bs-target="#navbarSupportedContent" 
              aria-controls="navbarSupportedContent" 
              aria-expanded="false" 
              aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" href="/">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/form">Cadastro</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/estoque">Estoque</a>
          </li>
        </ul>
        <form class="d-flex">
          <input class="form-control me-2" type="search" placeholder="Buscar" aria-label="Buscar">
          <button class="btn btn-outline-success" type="submit">Buscar</button>
        </form>
      </div>
    </div>
  </nav>

  <header class="text-center">
      <h1>Cadastro de Movimentação</h1>
  </header>

  <div class="container mt-5">
      <div class="col-8 m-auto">
          <div id="feedback" class="mt-3"></div>
          <form action="{% if form.instance.pk %}/update/{{ form.instance.pk }}/{% else %}/create/{% endif %}" method="POST">
              {% csrf_token %}

              <label for="entrada_saida">Entrada/Saida:</label>
              <select id="entrada_saida" name="entrada_saida" class="form-control">
                  <option value="Entrada" {% if form.entrada_saida.value == "Entrada" %}selected{% endif %}>Entrada</option>
                  <option value="Saida" {% if form.entrada_saida.value == "Saida" %}selected{% endif %}>Saída</option>
              </select>
              
              <div class="form-group">
                  <label for="data">Data:</label>
                  <input type="date" id="data" name="data" class="form-control" value="{{ form.data.value|default_if_none:'' }}" required>
              </div>
              
              <div class="form-group">
                  <label for="qtde">Quantidade:</label>
                  <input type="number" id="qtde" name="qtde" class="form-control" value="{{ form.qtde.value|default_if_none:'' }}" required>
              </div>

              <label for="tipo">Unidades:</label>
              <select id="tipo" name="tipo" class="form-control" onchange="toggleEspecificacoes(this.value)">
                  <option value="Cx" {% if form.tipo.value == "Cx" %}selected{% endif %}>Cx</option>
                  <option value="Unidades" {% if form.tipo.value == "Unidades" %}selected{% endif %}>Unidades</option>
                  <option value="Placas" {% if form.tipo.value == "Placas" %}selected{% endif %}>Placas</option>
              </select>

              <label for="formato">Formato:</label>
              <select id="formato" name="formato" class="form-control" onchange="atualizaSubcategoria()">
                  <option value="" {% if form.formato.value == "" %}selected{% endif %}>Selecione um tipo</option>
                  <option value="Acabamento" {% if form.formato.value == "Acabamento" %}selected{% endif %}>Acabamento</option>
                  <option value="Impressão" {% if form.formato.value == "Impressão" %}selected{% endif %}>Impressão</option>
                  <option value="Expedição" {% if form.formato.value == "Expedição" %}selected{% endif %}>Expedição</option>
                  <option value="Limpeza" {% if form.formato.value == "Limpeza" %}selected{% endif %}>Limpeza</option>
                  <option value="TintaTonner" {% if form.formato.value == "TintaTonner" %}selected{% endif %}>TintaTonner</option>
                  <option value="Escritório" {% if form.formato.value == "Escritório" %}selected{% endif %}>Escritório</option>
                  <option value="Mercado" {% if form.formato.value == "Mercado" %}selected{% endif %}>Mercado</option>
              </select>

              <label for="tipo_de_material">Subcategoria:</label>
              <select id="tipo_de_material" name="tipo_de_material" class="form-control">
                  <option value="">Selecione uma subcategoria</option>
              </select>
              
              <div class="form-group">
                  <label for="nome">Nome:</label>
                  <input type="text" id="nome" name="nome" class="form-control" value="{{ form.nome.value|default_if_none:'' }}" required>
              </div>
              
              <div id="especificacoes" class="hidden">
                  <div class="form-group">
                      <label for="folha">Folha:</label>
                      <input type="text" id="folha" name="folha" class="form-control" value="{{ form.folha.value|default_if_none:'' }}">
                  </div>

                  <label for="formato_da_folha">Formato:</label>
                  <select id="formato_da_folha" name="formato_da_folha" class="form-control" onchange="atualizaSubcategoria()">
                      <option value="null" {% if form.formato_da_folha.value == "null" %}selected{% endif %}>Selecione um tamanho</option>
                      <option value="640x880" {% if form.formato_da_folha.value == "640x880" %}selected{% endif %}>640x880</option>
                      <option value="660x960" {% if form.formato_da_folha.value == "660x960" %}selected{% endif %}>660x960</option>
                      <option value="CX2 - 25" {% if form.formato_da_folha.value == "CX2 - 25" %}selected{% endif %}>CX2 - 25</option>
                      <option value="CX2 - 20" {% if form.formato_da_folha.value == "CX2 - 20" %}selected{% endif %}>CX2 - 20</option>
                  </select>
              </div>
              
              <input type="submit" class="btn btn-success" value="Salvar">
          </form>
      </div>
  </div>

    <script>
      function toggleEspecificacoes(tipo) {
          const especificacoes = document.getElementById('especificacoes');
          if (tipo === "Placas") {
              especificacoes.classList.remove('hidden');
          } else {
              especificacoes.classList.add('hidden');
              document.getElementById('folha').value = 'null'; // Limpa o campo se não for "Placas"
          }
      }

      document.addEventListener('DOMContentLoaded', () => {
          const tipo = document.getElementById('tipo').value;
          toggleEspecificacoes(tipo);
      });

      // Chama a função no carregamento para definir o estado inicial
      document.addEventListener('DOMContentLoaded', () => {
          const tipo = document.getElementById('tipo').value;
          toggleEspecificacoes(tipo);
      });

      const subcategorias = {
        Acabamento: 
        [
          'ESPIRAL BRANCO 9 MM'
          ,'ESPIRAL BRANCO 12 MM'
          ,'ESPIRAL BRANCO 14 MM'
          ,'ESPIRAL BRANCO 17 MM'
          ,'ESPIRAL BRANCO 20 MM'
          ,'ESPIRAL BRANCO 23 MM'
          ,'ESPIRAL BRANCO 25 MM'
          ,'ESPIRAL BRANCO 29 MM'
          ,'ESPIRAL BRANCO 33 MM'
          ,'ESPIRAL BRANCO 40 MM'
          ,'ESPIRAL BRANCO 45 MM'
          ,'ESPIRAL BRANCO 50 MM'
          ,'ESPIRAL INCOLOR 9 MM'
          ,'ESPIRAL INCOLOR 12 MM'
          ,'ESPIRAL INCOLOR 14 MM'
          ,'ESPIRAL INCOLOR 17 MM'
          ,'ESPIRAL INCOLOR 20 MM'
          ,'ESPIRAL INCOLOR 23 MM'
          ,'ESPIRAL INCOLOR 25 MM'
          ,'ESPIRAL INCOLOR 29 MM'
          ,'ESPIRAL INCOLOR 33 MM'
          ,'ESPIRAL INCOLOR 40 MM'
          ,'ESPIRAL INCOLOR 45 MM'
          ,'ESPIRAL INCOLOR 50 MM'
          ,'ESPIRAL PRETO 9 MM'
          ,'ESPIRAL PRETO 12 MM'
          ,'ESPIRAL PRETO 14 MM'
          ,'ESPIRAL PRETO 17 MM'
          ,'ESPIRAL PRETO 20 MM'
          ,'ESPIRAL PRETO 23 MM'
          ,'ESPIRAL PRETO 25 MM'
          ,'ESPIRAL PRETO 29 MM'
          ,'ESPIRAL PRETO 33 MM'
          ,'ESPIRAL PRETO 40 MM'
          ,'ESPIRAL PRETO 45 MM'
          ,'ESPIRAL PRETO 50 MM'
          ,'WIRE-O BRANCO (1/2)'
          ,'WIRE-O BRANCO (1-1/4)'
          ,'WIRE-O BRANCO (3/4)'
          ,'WIRE-O PRETO (1/2)'
          ,'WIRE-O PRETO (1-1/4)'
          ,'WIRE-O PRETO (3/4)'
          ,'BOBINA DE LAMINAÇÃO BRILHO (MAIOR)'
          ,'BOBINA DE LAMINAÇÃO BRILHO (MENOR)'
          ,'BOBINA DE LAMINAÇÃO FOSCO'
          ,'BOBINA DE LAMINAÇÃO HOLOGRAFICA'
          ,'BOBINA PLASTICA (SHIRINK)'
          ,'BOBINA PLASTICA A3 (ENSACAMENTO)'
          ,'BOBINA PLASTICA A4 (ENSACAMENTO)'
          ,'CAPA PLASTICA INCOLOR'
          ,'CONTRA CAPA PLASTICA AZUL'
          ,'CONTRA CAPA PLASTICA PRETO'
          ,'GRAMPEADOR'
          ,'GRAMPO'
          ,'CX 2 - 20'
          ,'CX 2 - 25'
        ],
        Impressão: 
        [
           'A4 OFFSSET 75g'
          ,'A4 OFFSSET 75g AMARELO'
          ,'A4 OFFSSET 75g AZUL'
          ,'A4 OFFSSET 75g MARFIM'
          ,'A4 OFFSSET 75g ROSA'
          ,'A4 OFFSSET 75g VERDE'
          ,'A3 OFFSSET 75g'
          ,'A4 OFFSSET 90g'
          ,'A3 OFFSSET 90g'
          ,'A4 OFFSSET 120g'
          ,'A3 OFFSSET 120g'
          ,'A4 OFFSSET 180g'
          ,'A3 OFFSSET 180g'
          ,'A4 OFFSSET 240g'
          ,'A3 OFFSSET 240g'
          ,'A4 COUCHÊ 90g'
          ,'A3 COUCHÊ 90g'
          ,'A4 COUCHÊ 115g'
          ,'A3 COUCHÊ 115g'
          ,'A4 COUCHÊ 170g'
          ,'A3 COUCHÊ 170g'
          ,'A4 COUCHÊ 250g'
          ,'A3 COUCHÊ 250g'
          ,'A4 SUPREMO 300g'
          ,'A3 SUPREMO 300g'
          ,'ADESIVO FOSCO'
        ],
        TintaTonner: 
        [
          'KONICA AMARELO'
          ,'KONICA AZUL'
          ,'KONICA MAGENTA'
          ,'PHASER 7800 AMARELO'
          ,'PHASER 7800 AZUL'
          ,'PHASER 7800 MAGENTA'
          ,'PHASER 7800 PRETO'
          ,'TINTA EPSON AMARELO (CORANTE)'
          ,'TINTA EPSON AMARELO (PIG)'
          ,'TINTA EPSON AZUL (CORANTE)'
          ,'TINTA EPSON AZUL (PIG)'
          ,'TINTA EPSON MAGENTA (CORANTE)'
          ,'TINTA EPSON MAGENTA (PIG)'
          ,'TINTA EPSON PRETO (CORANTE)'
          ,'TINTA EPSON PRETO (PIG)'
          ,'TINTA FOTOGRAFICA AMARELO'
          ,'TINTA FOTOGRAFICA AZUL'
          ,'TINTA FOTOGRAFICA AZUL CLAR0'
          ,'TINTA FOTOGRAFICA MAGENTA'
          ,'TINTA FOTOGRAFICA MAGENTA CLARO'
          ,'TINTA FOTOGRAFICA PRETO'
          ,'TINTA PLOTTER AMARELO'
          ,'TINTA PLOTTER AZUL'
          ,'TINTA PLOTTER MAGENTA'
          ,'TINTA PLOTTER PRETO'
          ,'TINTA RISO AMARELA'
          ,'TINTA RISO AZUL'
          ,'TINTA RISO MAGENTA'
          ,'TINTA RISO PRETO'
          ,'TONER C75 AMARELA'
          ,'TONER C75 AZUL'
          ,'TONER C75 MAGENTA'
          ,'TONER C75 PRETO'
          ,'TONNER ORIGINAL'
          ,'TONNER RW'
          ,'TONNER RW'
          ,'KONICA PRETO'
        
        ],
        Expedição: ['Caixas', 'Paletes'],
        Limpeza: ['Detergentes', 'Desinfetantes'],
        Escritório: ['Papelaria', 'Mobiliário'],
        Mercado: ['Alimentos', 'Bebidas']
      };

      function atualizaSubcategoria() {
          const formatoSelect = document.getElementById('formato');
          const subcategoriaSelect = document.getElementById('tipo_de_material');

          // Limpa as opções anteriores
          subcategoriaSelect.innerHTML = '<option value="">Selecione uma subcategoria</option>';

          const formatoSelecionado = formatoSelect.value;
          if (formatoSelecionado && subcategorias[formatoSelecionado]) {
              subcategorias[formatoSelecionado].forEach(function(subcategoria) {
                  const option = document.createElement('option');
                  option.value = subcategoria;
                  option.textContent = subcategoria;
                  subcategoriaSelect.appendChild(option);
              });
          }
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script></body>
</html>


